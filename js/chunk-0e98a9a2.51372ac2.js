(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0e98a9a2"],{"0f88":function(t,e,n){},"6fc2":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("notify",{ref:"notify"}),n("section",{staticClass:"main"},[n("div",{staticClass:"info"},[n("u"),n("u"),n("li",[n("h5",[t._v(t._s(t.$t("总收益")))]),n("span",[n("em",[t._v(t._s(t._f("toFixed")(t._f("toAmount")(t.stakingMGP),8))+" MGP")])])]),n("li",[n("h5",[t._v(t._s(t.$t("可领取")))]),n("span",[n("em",[t._v(t._s(t._f("toFixed")(t._f("toAmount")(t.stakingIncome),8))+" MGP")])])])]),n("a",{staticClass:"btn btn-empty center",on:{click:t.claimPage}},[t._v(t._s(t.$t("领取当前页面收益")))]),n("div",{staticClass:"contant",staticStyle:{"margin-top":"10px"}},[n("section",{staticClass:"table"},[n("table",[n("thead",[n("tr",[n("td",[t._v(t._s(t.$t("质押时间")))]),n("td",[t._v(t._s(t.$t("到期时间")))]),n("td",[t._v(t._s(t.$t("到期收益")))]),n("td",[t._v(t._s(t.$t("可领取收益")))]),n("td",[t._v(t._s(t.$t("操作")))])])]),n("tbody",t._l(t.showRecord,(function(e,a){return n("tr",{key:a},[n("td",[n("b",[t._v(t._s(t._f("formatTimer")(1e3*e.startTime)))])]),n("td",[t._v(t._s(t._f("formatTimer")(1e3*e.endTime)))]),n("td",[n("em",[t._v(t._s(t._f("toFixed")(t._f("toAmount")(e.lockReward),4))+" MGP")])]),n("td",[n("span",[t._v(t._s(t._f("toFixed")(t._f("toAmount")(e.income),4))+" MGP")])]),n("td",[e.showClaim?n("a",{staticClass:"btn btn-empty",on:{click:function(n){return t.claim(e)}}},[t._v(t._s(t.$t("收获")))]):t._e(),e.over?n("a",{staticClass:"btn btn-empty",attrs:{href:"javascript:;"}},[t._v(t._s(t.$t("已完成")))]):t._e()])])})),0)])]),t.totalPage>t.limit?n("Pagination",{attrs:{"prev-text":t.$t("上一页"),"next-text":t.$t("下一页"),"items-per-page":t.limit,"total-items":t.totalPage,mode:"simple"},on:{change:t.showPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}):t._e()],1)])],1)},i=[],r=n("1da1"),s=n("ade3"),o=(n("bb16"),n("f240")),c=(n("d81d"),n("fb6a"),n("4de4"),n("b680"),n("96cf"),n("901e")),u=n.n(c),l=n("ee7a"),d={name:"Team",components:{Pagination:o["a"],Notify:l["a"]},data:function(){return{record:[],total:0,totalPage:0,currentPage:1,limit:20,showRecord:[],stakingMGP:"0",stakingIncome:"0"}},watch:Object(s["a"])({},"$store.state.walletAddress",(function(){this.init()})),methods:{claim:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var a,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.$loading.show(),n.prev=1,a=e.$api.getConnect(),n.next=5,a.tradeApi().claim([t.id]);case 5:return i=n.sent,e.$refs.notify.show(i.getHash()),n.next=9,i.confirm();case 9:return e.$toast(e.$t("提现成功")),n.next=12,e.init();case 12:n.next=17;break;case 14:n.prev=14,n.t0=n["catch"](1),e.$toast(n.t0.message);case 17:return n.prev=17,e.$loading.hide(),n.finish(17);case 20:case"end":return n.stop()}}),n,null,[[1,14,17,20]])})))()},claimPage:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$loading.show(),e.prev=1,n=t.$api.getConnect(),e.next=5,n.tradeApi().claim(t.showRecord.map((function(t){return t.id})));case 5:return a=e.sent,t.$refs.notify.show(a.getHash()),e.next=9,a.confirm();case 9:return t.$toast(t.$t("提现成功")),e.next=12,t.init();case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](1),t.$toast(e.t0.message);case 17:return e.prev=17,t.$loading.hide(),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,14,17,20]])})))()},showPage:function(){this.totalPage=this.record.length;var t=(this.currentPage-1)*this.limit;this.showRecord=this.record.slice(t,t+this.limit)},init:function(){var t=arguments,e=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var a,i,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=!(t.length>0&&void 0!==t[0])||t[0],a&&e.$loading.show(),n.prev=2,!e.$store.state.walletConnect){n.next=14;break}return i=e.$api.getConnect(),n.next=7,i.tradeApi().myNft(e.$store.state.walletAddress);case 7:r=n.sent,e.record=r.orderInfo.records.map((function(t){var e,n=r.currentBlockTimestamp;return e=new u.a(t.endTime).comparedTo(n)<=0?new u.a(t.lockReward).minus(t.withdrawAmount).toFixed():new u.a(n).minus(t.startTime).div(new u.a(t.endTime).minus(t.startTime)).multipliedBy(t.lockReward).minus(t.withdrawAmount),{res:t,id:t.id,orderType:parseInt(t.orderType,10),startTime:t.startTime,endTime:t.endTime,stakeAmount:t.stakeAmount,stakeToken:t.stakeToken,lockReward:t.lockReward,withdrawAmount:t.withdrawAmount,income:e,showUnStake:new u.a(t.endTime).comparedTo(n)<=0&&new u.a(t.stakeAmount).comparedTo(0)>0,showClaim:new u.a(e).comparedTo(0)>0,over:0===new u.a(t.stakeAmount).comparedTo(0)&&0===new u.a(t.lockReward).comparedTo(t.withdrawAmount)}})).filter((function(t){return 1===t.orderType})),e.total=e.record.length,e.showPage(),e.stakingIncome=e.record.map((function(t){return t.income})).reduce((function(t,e){return new u.a(t).plus(e).toFixed()}),"0"),e.stakingMGP=e.record.map((function(t){return t.lockReward})).reduce((function(t,e){return new u.a(t).plus(e).toFixed()}),"0");case 14:return n.prev=14,a&&e.$loading.hide(),n.finish(14);case 17:case"end":return n.stop()}}),n,null,[[2,,14,17]])})))()}},mounted:function(){this.init()},created:function(){return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()}},f=d,m=n("2877"),h=Object(m["a"])(f,a,i,!1,null,"654f3f00",null);e["default"]=h.exports},"7cf2":function(t,e,n){"use strict";n("0f88")},"7cf4":function(t,e,n){},bb16:function(t,e,n){"use strict";n("3cd0"),n("dc09")},dc09:function(t,e,n){},ee7a:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("van-notify",{staticStyle:{opacity:"0.8"},attrs:{type:"success",background:"#2464f6"},model:{value:t.notify.show,callback:function(e){t.$set(t.notify,"show",e)},expression:"notify.show"}},[n("div",{staticClass:"flex align-center justify-between notify"},[n("a",{staticClass:"link flex align-center justify-between",attrs:{href:t.etherscan,target:"_blank"}},[n("div",{staticClass:"flex align-center left bbo"},[n("van-icon",{staticClass:"right",attrs:{name:"passed"}}),n("span",{staticClass:"ellipsis"},[t._v(t._s(t.$t("交易提交成功："))+" "+t._s(t._f("showTx")(t.notify.tx)))])],1),n("van-icon",{staticClass:"right",attrs:{name:"arrow"}})],1)])])],1)},i=[],r=(n("3cd0"),n("1a44"),n("acc2"),n("ad06")),s=(n("1812"),n("5e5e"),n("7cf4"),n("1988")),o=n("2b0e"),c=n("2638"),u=n.n(c),l=n("d282"),d=n("ba31"),f=n("6605"),m=n("e41f"),h=Object(l["a"])("notify"),p=h[0],v=h[1];function g(t,e,n,a){var i={color:e.color,background:e.background};return t(m["a"],u()([{attrs:{value:e.value,position:"top",overlay:!1,duration:.2,lockScroll:!1},style:i,class:[v([e.type]),e.className]},Object(d["a"])(a,!0)]),[(null==n.default?void 0:n.default())||e.message])}g.props=Object(s["a"])({},f["b"],{color:String,message:[Number,String],duration:[Number,String],className:null,background:String,getContainer:[String,Function],type:{type:String,default:"danger"}});var w,b,x=p(g),_=n("a142");function k(t){return Object(_["e"])(t)?t:{message:t}}function y(t){if(!_["f"])return b||(b=Object(d["b"])(x,{on:{click:function(t){b.onClick&&b.onClick(t)},close:function(){b.onClose&&b.onClose()},opened:function(){b.onOpened&&b.onOpened()}}})),t=Object(s["a"])({},y.currentOptions,k(t)),Object(s["a"])(b,t),clearTimeout(w),t.duration&&t.duration>0&&(w=setTimeout(y.clear,t.duration)),b}function $(){return{type:"danger",value:!0,message:"",color:void 0,background:void 0,duration:3e3,className:"",onClose:null,onClick:null,onOpened:null}}y.clear=function(){b&&(b.value=!1)},y.currentOptions=$(),y.setDefaultOptions=function(t){Object(s["a"])(y.currentOptions,t)},y.resetDefaultOptions=function(){y.currentOptions=$()},y.install=function(){o["default"].use(x)},y.Component=x,o["default"].prototype.$notify=y;var T=y,C=n("365c"),P={name:"notify",components:{"van-notify":T.Component,"van-icon":r["a"]},computed:{etherscan:function(){return C["a"].goEtherscanTx(this.notify.tx)}},filters:{showTx:function(t){return t.substr(0,6)+"****"+t.substr(t.length-6)}},data:function(){return{notify:{show:!1,tx:""}}},methods:{show:function(t){var e=this;this.notify.tx=t,this.notify.show=!0,setTimeout((function(){e.notify.show=!1}),5e3)}}},O=P,j=(n("7cf2"),n("2877")),R=Object(j["a"])(O,a,i,!1,null,"221cc3c1",null);e["a"]=R.exports},f240:function(t,e,n){"use strict";var a=n("d282"),i="van-hairline",r=Object(a["a"])("pagination"),s=r[0],o=r[1],c=r[2];function u(t,e,n){return{number:t,text:e,active:n}}e["a"]=s({props:{prevText:String,nextText:String,forceEllipses:Boolean,mode:{type:String,default:"multi"},value:{type:Number,default:0},pageCount:{type:[Number,String],default:0},totalItems:{type:[Number,String],default:0},itemsPerPage:{type:[Number,String],default:10},showPageSize:{type:[Number,String],default:5}},computed:{count:function(){var t=this.pageCount||Math.ceil(this.totalItems/this.itemsPerPage);return Math.max(1,t)},pages:function(){var t=[],e=this.count,n=+this.showPageSize;if("multi"!==this.mode)return t;var a=1,i=e,r=n<e;r&&(a=Math.max(this.value-Math.floor(n/2),1),i=a+n-1,i>e&&(i=e,a=i-n+1));for(var s=a;s<=i;s++){var o=u(s,s,s===this.value);t.push(o)}if(r&&n>0&&this.forceEllipses){if(a>1){var c=u(a-1,"...",!1);t.unshift(c)}if(i<e){var l=u(i+1,"...",!1);t.push(l)}}return t}},watch:{value:{handler:function(t){this.select(t||this.value)},immediate:!0}},methods:{select:function(t,e){t=Math.min(this.count,Math.max(1,t)),this.value!==t&&(this.$emit("input",t),e&&this.$emit("change",t))}},render:function(){var t,e,n=this,a=arguments[0],r=this.value,s="multi"!==this.mode,u=function(t){return function(){n.select(t,!0)}};return a("ul",{class:o({simple:s})},[a("li",{class:[o("item",{disabled:1===r}),o("prev"),i],on:{click:u(r-1)}},[(null!=(t=this.slots("prev-text"))?t:this.prevText)||c("prev")]),this.pages.map((function(t){var e;return a("li",{class:[o("item",{active:t.active}),o("page"),i],on:{click:u(t.number)}},[null!=(e=n.slots("page",t))?e:t.text])})),s&&a("li",{class:o("page-desc")},[this.slots("pageDesc")||r+"/"+this.count]),a("li",{class:[o("item",{disabled:r===this.count}),o("next"),i],on:{click:u(r+1)}},[(null!=(e=this.slots("next-text"))?e:this.nextText)||c("next")])])}})}}]);